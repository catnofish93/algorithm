#### Http协议
##### 概况
默认端口号： 80<br>
使用协议： 使用TCP协议作为传输层协议，保证数据的可靠性<br>
状态： 无状态协议，不会保存客户端的信息<br>
连接模式： 持续连接和非持续连接，非持续连接，每次请求建一个新的TCP连接，持续连接，TCP协议默认不关闭，多次复用<br>
##### Http请求报文
    // 方法字段/url字段/http判断字段
    GET /url HTTP/1.1
    User-Agent: Mozilla5.0
    Accept: */*
##### Http响应报文
    // 状态行
    HTTP/1.0 200 OK
    // 首部行
    Content-Type: text/plain
    Content-Length: 137582
    Expires: Thu, 05 Dec 1997 16:00:00 GMT
    Last-Modified: Wed, 5 August 1996 15:55:28 GMT
    Server: Apache 0.84
    // 实体主体
    <html>
        <body>hello world</body>
    </html>
##### Http1.1协议缺点
默认使用持续连接，但在同一TCP连接中，请求的次序是固定的，当前一个响应比较慢时，会发生"队头阻塞"<br>
为避免这个问题，一是减少请求次数，二是同时打开多个持续连接
##### Http2协议
新特性<br>
1、Http/2是一个二进制协议。<br>
2、多路复用，依然使用持续连接，但在一个连接中，客户端/服务端可以发送多个请求或回应，避免了"队头阻塞"的问题<br>
3、数据流，上一点所说的同一个可能发送多个无顺序请求,因此需要对每一次请求包进行标记，每一个请求或回应的数据包，称为一个数据流，并给一个唯一编号<br>
4、头部信息压缩，一方面使用gzip或compress压缩后发送，另一方面客户端与服务器同时维护一张索引表，所有字段会存入索引表，进行索引优化<br>
5、Http/2允许服务主动向客户端推送资源<br>
##### Http2协议缺点
因为使用了多路复用，同一域名下使用一个TCP连接，如果一个数据被阻塞，剩余数据流都无法发出<br>
#### Https协议
##### Http协议的缺点
1、使用明文发送，可能被第三方窃听；<br>
2、可能会被修改，而无法发现<br>
3、Http还存在认证的问题，第三方可能会冒充参与通信
##### Https简介
基于Http协议，使用TSL/SSL进行加密，提供校验机制，配备身份证书，无法别冒充<br>
##### TSL握手过程
1、向服务端发起请求，包含版本号，随机数，加密方法<br>
2、服务器接受请求后，确认加密方法，返回服务器证书和生成的随机数<br>
3、客户端确认证书，生成新的随机数，用数字证书中的公钥加密随机数，发送个服务器<br>
4、服务器使用私钥解密客户端发过来的随机数<br>
5、根据约定的加密方法使用前面3个随机数，生成对话秘钥，后面均使用这个秘钥加密信息
##### 数字证书
1、使用hash算法对公钥和其他信息加密成一个信息摘要，用认证中心的私钥对信息摘要进行加密, 将两者合在一起形成数字证书<br>
2、接受方收到数字证书后，使用的同样的hash算法对原始信息进行加密，再用CAd的公钥对信息摘要进行解密，将两者进行比较，如果一直，则未被窜改<br>
#### 多路复用和多路分解
源主机从不同的套节字中收集数据，封装成报文后传输给网络层，称为多路复用
将传输层报文端交付成正确的套节字，称为多路分解
无连接的多路分解和多路复用指UDP套节字分配过程
面向连接的多路分解和多路复用指TCP套节字分配过程
#### UDP协议
无连接不可靠的传输协议，提供传输层，最低限度的功能，适用于实时性高的场景
##### 特点
1、没有握手过程，无连接的传输层协议；<br>
2、不可靠；<br>
3、UDP没有拥堵控制和流量控制的机制；<br>
4、因为一个UDP套节字包含IP地址和端口号，因此支持一对一，一对多，多对一，多对多的通信；<br>
5、UDP首部小，只有8个字节<br>
#### TCP协议
特点<br>
1、TCP协议是面向连接的，通信前，需进行三次握手<br>
2、TCP协议通过序号，确认号，定时重传，检验和等机制，提供可靠的传输协议<br>
3、提供点对点的服务；<br>
4、全双工服务<br>
5、阻塞控制, 在网络拥堵的时候，控制发送数据的速率<br>
6、流量控制，保证通信双方发送和接受的速率相同<br>
##### TCP报文字段
<table>
    <tr>
        <td colspan="2">32比特</td>
    </tr>
    <tr>
        <td>源端口号</td>
        <td>目的端口号</td>
    </tr>
    <tr>
        <td colspan="2">序号</td>
    </tr>
    <tr>
        <td colspan="2">确认号</td>
    </tr>
    <tr>
        <td>首部长度</td>
        <td>接受窗口</td>
    </tr>
    <tr>
        <td>英特网校验和</td>
        <td>紧急数据指针</td>
    </tr>
    <tr>
        <td colspan="2">选项</td>
    </tr>
    <tr>
        <td colspan="2">数据</td>
    </tr>
</table>

##### TCP3次握手

